import { index, pgTable, serial, uuid, varchar } from "drizzle-orm/pg-core";

export const usersTable = pgTable(
    "users",
    {
        id: serial("id").primaryKey(),
        displayId: uuid("display_id").defaultRandom().notNull().unique(),
        username: varchar("username", { length: 100}).notNull().unique(),
        email: varchar("email", { length: 100 }).notNull().unique(),
        hashedPassword: varchar("hashed_password", { length: 100 }),
        provider: varchar("provider", {
            length: 100,
            enum: ["github", "credentials"],
        })
            .notNull()
            .default("credentials"),
    },
    (table) => ({
        displayIdIndex: index("display_id_index").on(table.displayId),
        emailOndex: index("email_index").on(table.email),
    }),
);